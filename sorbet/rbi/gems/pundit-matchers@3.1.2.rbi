# typed: true

# DO NOT EDIT MANUALLY
# This is an autogenerated file for types exported from the `pundit-matchers` gem.
# Please instead update this file by running `bin/tapioca gem pundit-matchers`.

module Pundit
  include ::Pundit::Authorization

  class << self
    def authorize(user, possibly_namespaced_record, query, policy_class: T.unsafe(nil), cache: T.unsafe(nil)); end
    def included(base); end
    def policy(user, record); end
    def policy!(user, record); end
    def policy_scope(user, scope); end
    def policy_scope!(user, scope); end

    private

    def pundit_model(record); end
  end
end

# Matchers module provides a set of RSpec matchers for testing Pundit policies.
module Pundit::Matchers
  # Creates a matcher that tests if the policy forbids all actions.
  #
  # @note The negative form +not_to forbid_all_actions+ is not supported
  #   since it creates ambiguity. Instead use +to permit_all_actions+.
  # @return [ForbidAllActionsMatcher] the matcher object.
  def forbid_all_actions; end

  # Creates a matcher that tests if the policy forbids only a set of actions.
  #
  # @note The negative form +not_to forbid_only_actions+ is not supported
  #   since it creates ambiguity. Instead use +to permit_only_actions+.
  # @param actions [Array<String, Symbol>] the actions to be tested.
  # @return [ForbidOnlyActionsMatcher] the matcher object.
  def forbid_only_actions(*actions); end

  # Creates a matcher that tests if the policy permits a given action.
  #
  # @param action [String|Symbol] the action to be tested.
  # @return [PermitActionsMatcher] the matcher object.
  def permit_action(action); end

  # Creates a matcher that tests if the policy permits a set of actions.
  #
  # @param actions [Array<String, Symbol>] the actions to be tested.
  # @return [PermitActionsMatcher] the matcher object.
  def permit_actions(*actions); end

  # Creates a matcher that tests if the policy permits all actions.
  #
  # @note The negative form +not_to permit_all_actions+ is not supported
  #   since it creates ambiguity. Instead use +to forbid_all_actions+.
  # @return [PermitAllActionsMatcher] the matcher object.
  def permit_all_actions; end

  # Creates a matcher that tests if the policy permits mass assignment of an attribute.
  #
  # @param attribute [String, Symbol, Hash] the attribute to be tested.
  # @return [PermitAttributesMatcher] the matcher object.
  def permit_attribute(attribute); end

  # Creates a matcher that tests if the policy permits mass assignment of a set of attributes.
  #
  # @param attributes [Array<String, Symbol, Hash>] the attributes to be tested.
  # @return [PermitAttributesMatcher] the matcher object.
  def permit_attributes(*attributes); end

  # Creates a matcher that tests if the policy permits the edit and update actions.
  #
  # @return [PermitActionsMatcher] the matcher object.
  def permit_edit_and_update_actions; end

  # Creates a matcher that tests if the policy permits the new and create actions.
  #
  # @return [PermitActionsMatcher] the matcher object.
  def permit_new_and_create_actions; end

  # Creates a matcher that tests if the policy permits only a set of actions.
  #
  # @note The negative form +not_to permit_only_actions+ is not supported
  #   since it creates ambiguity. Instead use +to forbid_only_actions+.
  # @param actions [Array<String, Symbol>] the actions to be tested.
  # @return [PermitOnlyActionsMatcher] the matcher object.
  def permit_only_actions(*actions); end

  class << self
    # Returns the configuration object for Pundit Matchers.
    #
    # @return [Configuration] the configuration object.
    def configuration; end

    # Configures Pundit Matchers.
    #
    # @yieldparam configuration [Configuration] the configuration object to be modified.
    def configure; end
  end
end

# This is the base action matcher class. Matchers related to actions should inherit from this class.
class Pundit::Matchers::ActionsMatcher < ::Pundit::Matchers::BaseMatcher
  # Initializes a new instance of the ActionsMatcher class.
  #
  # @param expected_actions [Array<String, Symbol>] The expected actions to be checked.
  # @raise [ArgumentError] If no actions are specified.
  # @return [ActionsMatcher] a new instance of ActionsMatcher
  def initialize(*expected_actions); end

  # Ensures that only one action is specified.
  #
  # @raise [ArgumentError] If more than one action is specified.
  # @return [ActionsMatcher] The object itself.
  def ensure_single_action!; end

  private

  # @raise [ArgumentError]
  def check_actions!; end

  # Returns the value of attribute expected_actions.
  def expected_actions; end
end

# Error message when actions are not implemented in a policy.
Pundit::Matchers::ActionsMatcher::ACTIONS_NOT_IMPLEMENTED_ERROR = T.let(T.unsafe(nil), String)

# Error message when at least one action must be specified.
Pundit::Matchers::ActionsMatcher::ARGUMENTS_REQUIRED_ERROR = T.let(T.unsafe(nil), String)

# Error message when only one action may be specified.
Pundit::Matchers::ActionsMatcher::ONE_ARGUMENT_REQUIRED_ERROR = T.let(T.unsafe(nil), String)

# The AttributesMatcher class is used to test whether a Pundit policy allows or denies access to certain attributes.
class Pundit::Matchers::AttributesMatcher < ::Pundit::Matchers::BaseMatcher
  # Initializes a new instance of the AttributesMatcher class.
  #
  # @param expected_attributes [Array<String, Symbol, Hash>] The list of attributes to be tested.
  # @raise [ArgumentError]
  # @return [AttributesMatcher] a new instance of AttributesMatcher
  def initialize(*expected_attributes); end

  # Ensures that only one attribute is specified.
  #
  # @raise [ArgumentError] If more than one attribute is specified.
  # @return [AttributesMatcher] The object itself.
  def ensure_single_attribute!; end

  # Specifies the action to be tested.
  #
  # @param action [Symbol, String] The action to be tested.
  # @return [AttributesMatcher] The current instance of the AttributesMatcher class.
  def for_action(action); end

  private

  def action_message; end

  # Returns the value of attribute expected_attributes.
  def expected_attributes; end

  # Flattens and sorts a hash or array of attributes into an array of symbols.
  #
  # This is a private method used internally by the `Matcher` class to convert
  # attribute lists into a flattened, sorted array of symbols. The resulting
  # array can be used to compare attribute lists.
  #
  # @param attributes [String, Symbol, Array, Hash] the attributes to be flattened.
  # @return [Array<Symbol>] the flattened, sorted array of symbols.
  def flatten_attributes(attributes); end

  # Returns the value of attribute options.
  def options; end

  def permitted_attributes(policy); end
end

# Error message to be raised when no attributes are specified.
Pundit::Matchers::AttributesMatcher::ARGUMENTS_REQUIRED_ERROR = T.let(T.unsafe(nil), String)

# Error message to be raised when only one attribute may be specified.
Pundit::Matchers::AttributesMatcher::ONE_ARGUMENT_REQUIRED_ERROR = T.let(T.unsafe(nil), String)

# This is the base class for all matchers in the Pundit Matchers library.
class Pundit::Matchers::BaseMatcher
  include ::RSpec::Matchers::Composable

  private

  # Returns the value of attribute policy_info.
  def policy_info; end

  def setup_policy_info!(policy); end
  def user_message; end
end

# Error message when an ambiguous negated matcher is used.
Pundit::Matchers::BaseMatcher::AMBIGUOUS_NEGATED_MATCHER_ERROR = T.let(T.unsafe(nil), String)

# Configuration class for Pundit Matchers.
class Pundit::Matchers::Configuration
  # @return [Configuration] a new instance of Configuration
  def initialize; end

  # The default user object in policies.
  #
  # @return [Symbol|String]
  def default_user_alias; end

  # The default user object in policies.
  #
  # @return [Symbol|String]
  def default_user_alias=(_arg0); end

  # Returns the user object for the given policy.
  #
  # @return [Symbol]
  def user_alias(policy); end

  # Policy-specific user objects.
  #
  # @example Use +:client+ as user alias for class +Post+
  #   config.user_aliases = { 'Post' => :client }
  # @return [Hash]
  def user_aliases; end

  # Policy-specific user objects.
  #
  # @example Use +:client+ as user alias for class +Post+
  #   config.user_aliases = { 'Post' => :client }
  # @return [Hash]
  def user_aliases=(_arg0); end
end

# The default user object value
Pundit::Matchers::Configuration::DEFAULT_USER_ALIAS = T.let(T.unsafe(nil), Symbol)

# This matcher tests whether a policy forbids all actions.
class Pundit::Matchers::ForbidAllActionsMatcher < ::Pundit::Matchers::BaseMatcher
  # A description of the matcher.
  #
  # @return [String] Description of the matcher.
  def description; end

  # Raises a NotImplementedError
  #
  # @raise NotImplementedError
  # @return [void]
  def does_not_match?(_policy); end

  # Returns a failure message if the matcher fails.
  #
  # @return [String] Failure message.
  def failure_message; end

  # Checks if the given policy forbids all actions.
  #
  # @param policy [Object] The policy to test.
  # @return [Boolean] True if the policy forbids all actions, false otherwise.
  def matches?(policy); end
end

# This matcher tests whether a policy forbids only the expected actions.
class Pundit::Matchers::ForbidOnlyActionsMatcher < ::Pundit::Matchers::ActionsMatcher
  # A description of the matcher.
  #
  # @return [String] Description of the matcher.
  def description; end

  # Raises a NotImplementedError
  #
  # @raise NotImplementedError
  # @return [void]
  def does_not_match?(_policy); end

  # The failure message when the expected actions and the forbidden actions do not match.
  #
  # @return [String] A failure message when the expected actions and the forbidden actions do not match.
  def failure_message; end

  # Checks if the given policy forbids only the expected actions.
  #
  # @param policy [Object] The policy to test.
  # @return [Boolean] True if the policy forbids only the expected actions, false otherwise.
  def matches?(policy); end

  private

  # Returns the value of attribute actual_actions.
  def actual_actions; end

  # Returns the value of attribute extra_actions.
  def extra_actions; end

  def extra_message; end
end

# A Proc that negates the description of a matcher.
Pundit::Matchers::NEGATED_DESCRIPTION = T.let(T.unsafe(nil), Proc)

# This matcher tests whether a policy permits or forbids the expected actions.
class Pundit::Matchers::PermitActionsMatcher < ::Pundit::Matchers::ActionsMatcher
  # A description of the matcher.
  #
  # @return [String] Description of the matcher.
  def description; end

  # Checks if the given policy forbids the expected actions.
  #
  # @param policy [Object] The policy to test.
  # @return [Boolean] True if the policy forbids the expected actions, false otherwise.
  def does_not_match?(policy); end

  # Returns a failure message when the expected actions are forbidden.
  #
  # @return [String] A failure message when the expected actions are not forbidden.
  def failure_message; end

  # Returns a failure message when the expected actions are permitted.
  #
  # @return [String] A failure message when the expected actions are permitted.
  def failure_message_when_negated; end

  # Checks if the given policy permits the expected actions.
  #
  # @param policy [Object] The policy to test.
  # @return [Boolean] True if the policy permits the expected actions, false otherwise.
  def matches?(policy); end

  private

  # Returns the value of attribute actual_actions.
  def actual_actions; end
end

# This matcher tests whether a policy permits all actions.
class Pundit::Matchers::PermitAllActionsMatcher < ::Pundit::Matchers::BaseMatcher
  # A description of the matcher.
  #
  # @return [String] A description of the matcher.
  def description; end

  # Raises a NotImplementedError
  #
  # @raise NotImplementedError
  # @return [void]
  def does_not_match?(_policy); end

  # Returns a failure message when the policy does not permit all actions.
  #
  # @return [String] A failure message when the policy does not permit all actions.
  def failure_message; end

  # Checks if the given policy permits all actions.
  #
  # @param policy [Object] The policy to test.
  # @return [Boolean] True if the policy permits all actions, false otherwise.
  def matches?(policy); end
end

# This matcher tests whether a policy permits or forbids the mass assignment of the expected attributes.
class Pundit::Matchers::PermitAttributesMatcher < ::Pundit::Matchers::AttributesMatcher
  # A description of the matcher.
  #
  # @return [String] A description of the matcher.
  def description; end

  # Checks if the given policy forbids the mass assignment of the expected attributes.
  #
  # @param policy [Object] The policy to test.
  # @return [Boolean] True if the policy forbids the mass assignment of the expected attributes, false otherwise.
  def does_not_match?(policy); end

  # The failure message when the expected attributes are forbidden.
  #
  # @return [String] A failure message when the expected attributes are not permitted.
  def failure_message; end

  # The failure message when the expected attributes are permitted.
  #
  # @return [String] A failure message when the expected attributes are forbidden.
  def failure_message_when_negated; end

  # Checks if the given policy permits the mass assignment of the expected attributes.
  #
  # @param policy [Object] The policy to test.
  # @return [Boolean] True if the policy permits the mass assignment of the expected attributes, false otherwise.
  def matches?(policy); end

  private

  # Returns the value of attribute actual_attributes.
  def actual_attributes; end
end

# This matcher tests whether a policy permits only the expected actions.
class Pundit::Matchers::PermitOnlyActionsMatcher < ::Pundit::Matchers::ActionsMatcher
  # A description of the matcher.
  #
  # @return [String] A description of the matcher.
  def description; end

  # Raises a NotImplementedError
  #
  # @raise NotImplementedError
  # @return [void]
  def does_not_match?(_policy); end

  # The failure message when the expected actions and the permitted actions do not match.
  #
  # @return [String] A failure message when the expected actions and the permitted actions do not match.
  def failure_message; end

  # Checks if the given policy permits only the expected actions.
  #
  # @param policy [Object] The policy to test.
  # @return [Boolean] True if the policy permits only the expected actions, false otherwise.
  def matches?(policy); end

  private

  # Returns the value of attribute actual_actions.
  def actual_actions; end

  # Returns the value of attribute extra_actions.
  def extra_actions; end

  def extra_message; end
end

module Pundit::Matchers::Utils; end

# This class provides methods to retrieve information about a policy class,
# such as the actions it defines and which of those actions are permitted
# or forbidden. It also provides a string representation of the policy class name
# and the user object associated with the policy.
class Pundit::Matchers::Utils::PolicyInfo
  # Initializes a new instance of PolicyInfo.
  #
  # @param policy [Class] The policy class to collect details about.
  # @return [PolicyInfo] a new instance of PolicyInfo
  def initialize(policy); end

  # Returns an array of all actions defined in the policy class.
  #
  # It assumes that actions are defined as public instance methods that end with a question mark.
  #
  # @return [Array<Symbol>] An array of all actions defined in the policy class.
  def actions; end

  # Returns an array of all forbidden actions defined in the policy class.
  #
  # @return [Array<Symbol>] An array of all forbidden actions defined in the policy class.
  def forbidden_actions; end

  # Returns an array of all permitted actions defined in the policy class.
  #
  # @return [Array<Symbol>] An array of all permitted actions defined in the policy class.
  def permitted_actions; end

  # Returns the value of attribute policy.
  def policy; end

  # Returns a string representation of the policy class name.
  #
  # @return [String] A string representation of the policy class name.
  def to_s; end

  # Returns the user object associated with the policy.
  #
  # @return [Object] The user object associated with the policy.
  def user; end

  private

  # @raise [ArgumentError]
  def check_user_alias!; end

  def policy_public_methods; end
  def user_alias; end
end

# Error message when policy does not respond to `user_alias`.
Pundit::Matchers::Utils::PolicyInfo::USER_NOT_IMPLEMENTED_ERROR = T.let(T.unsafe(nil), String)
